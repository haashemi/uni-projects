# اینترپر DXPreter!

یک اینترپرتر بسیار ساده با قابلیت تعریف متغیر و پرینت متن‌ها به همراه استفاده از متغیرها.

## نحوه اجرا:

برای اجرای این اینترپرتر کافی‌ست یکی از دو کامند زیر را اجرا کنید:

### اجرای محیط shell

```sh
python dx.py
```

### اجرای یک فایل

```sh
python dx.py example.dx
```

## دیتا تایپ‌ها:

| Data Type | Definition                          |
| --------- | ----------------------------------- |
| int       | داده های عددی                       |
| str       | رشته‌هایی که میان دو "" قرار بگیرند |

## سینتکس کلی:

سینتکس این پروژه نسبتا ساده در نظر گرفته شده چرا که از امکانات زیادی برخوردار نیست.

تعریف متغیر از نوع عددی:

```
int age = 22
```

تعریف متغیر از نوع رشته:

```
str name = "Ali Hashemi"
```

نوشتن یک لاگ در خروجی:

```
log("Hello World")
```

نوشتن لاگ با استفاده از متغیرها:

```
log[name]("Hello %str%")
```

نوشتن کامنت در برنامه:

```
// این خط اجرا نخواهد شد
```

## مثال:

در قطعه کد زیر می‌توانید تمامی امکانات این زبان را مشاهده کنید.

```
// Simple log
log("vvvvvvvvvvvv")
log("Hello World!")
log("^^^^^^^^^^^^")

// Empty log
log("")

// Define a string variable
str prefix = "Current Working Directory is:"

// Formatted log using variables
// 'pwd' is a standard variable here!
log[prefix, pwd]("%str% %str%")

log("")
log("")

// Define integer and string variables
int age = 22
str name = "Ali Hashemi"

log[name, age]("Hello! I'm %str%. A %int% years old newbie developer!")
```

## نحوه کارکرد:

این اینترپر بر پایه regexp کار می‌کند. به این صورت که کد ها را خط به خط خوانده، سپس با اجرای regex pattern های از پیش تعیین شده کاربرد آن خط کد را نشخیص می‌دهد و سپس پروسه‌ی لازم را روی همان خط اجرا می‌کند.

پس از اجرای اینترپرتر، اگر فایلی مشخص شده باشد، خط به خط آن اجرا می‌شود، اما اگر فایلی مشخص نشده باشد، محیط interactive اجرا می‌شود تا کاربر خط به خط کد خود را در لحظه بنویسد و اجرا کند.

در حین اجرای هر خط، فاصله‌های پوچ قبل و بعد هر خط حذف می‌شود و اگر خط کد خالی بود یا با `//` شروع می‌شد، پروسه‌ای روی آن خط کد اجرا نمی‌شود.

در غیر این صورت، روی هر خط به ترتیب regex pattern هایی اجرا می‌شود تا هدف و کارکرد خط کد مشخص شود (اعم از تعریف متغیر، لاگ ساده و لاگ متغیر دار).

پس از مشخص شدن کارکرد، پروسه‌ی مربوطه روی همان خط کد اجرا می‌شود تا داده‌های لازم استخراج شود و هرگونه اقدامی نیاز باشد روی آن صورت گیرد. به عنوان مثال اگر تعریف متغیر باشد، با تشخیص نوع داده، آن را parse و سپس از لیست متغیر های برنامه ذخیره می‌کند. اگر لاگ باشد، متن پیام را استخراج و آن را در خروجی می‌نویسد.

پس از parse و اجرای تمامی خطوط نیز اینترپرتر بسته می‌شود.
